<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
<title>Blank Page - Brand</title>
<link rel="stylesheet" href="./bootstrap/css/bootstrap.min.css">
<link rel="stylesheet"
	href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&amp;display=swap">
<link rel="stylesheet" href="./fonts/fontawesome-all.min.css">
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"
	type="text/javascript"></script>


<style>
#success_message {
	display: none;
}

* {
	box-sizing: border-box;
	font-size: 16px;
}

.container {
	width: 900px;
	margin: 0 auto;
}

.container h1 {
	margin: 20px;
	text-align: center;
}

.container form {
	padding: 20px;
	background: #EBF0F4;
	border-radius: 10px;
}

.form-group {
	border: 1px solid white;
	box-shadow: 2px 2px 4px 0 rgba(0, 0, 0, 0.2);
	border-radius: 20px;
	display: block;
	align-items: center;
	padding: 0 0 100px 30px;
	margin-bottom: 20px;
	height: 60px;
}

.help-block.error {
	margin-bottom: 5px;
}

.messages {
	margin: 10px 5px;
	color: #dc3545
}

label {
	width: auto;
	white-space: nowrap;
}

div.text {
	/* border: 1px solid black; */
	display: inline-block;
	width: 80px;
	margin-left: 50px;
}

.form-control {
	display: inline-block;
	position: relative;
	margin-right: 30px;
	min-width: 500px !important;
	max-width: 500px !important;
	width: 500px;
}

.help-block {
	font-size: 12px;
	display: block;
	position: relative;
	margin-top: 2px;
	color: red;
	width: 300px;
}

.well {
	display: flex;
	flex-direction: column;
	justify-content: center;
	align-items: center;
	width: 700px;
}

.change_password {
	display: inline-block;
	position: relative;
	color: blue;
	text-decoration: underline;
	cursor: pointer;
}

#owner_password {
	cursor: not-allowed;
	background-color: #eaecf4;
}

#hotel_lic_id {
	cursor: not-allowed;
	background-color: #eaecf4;
}


</style>
</head>

<body id="page-top">
	<div id="wrapper">
		<nav
			class="navbar navbar-dark align-items-start sidebar sidebar-dark accordion bg-gradient-primary p-0"
			style="background: #f1ecd1;">
			<div class="container-fluid d-flex flex-column p-0">
				<a
					class="navbar-brand d-flex justify-content-center align-items-center sidebar-brand m-0"
					href="#">
					<div class="sidebar-brand-text mx-3">
						<img width="59" height="33" src="./img/avatars/logo-only.png">
					</div>
				</a>
				<hr class="sidebar-divider my-0">
				<ul class="navbar-nav">
					<li class="nav-item dropdown show"><a
						class="dropdown-toggle nav-link" aria-expanded="true"
						data-bs-toggle="dropdown" data-bs-auto-close="false" href="#"
						style="color: #a67c52; padding: 5px 16px; font-weight: bold; font-size: 14px;">å¸³è™Ÿç®¡ç†</a>
						<div class="dropdown-menu show" data-bs-popper="none"
							style="background: rgba(255, 255, 255, 0); border-style: none; padding: 0px; margin: 0px; margin-bottom: 5px;">
							<a class="dropdown-item" href="#"
								style="padding: 2px 30px; font-size: 13px;">èªè­‰è³‡æ–™</a><a
								class="dropdown-item" href="#"
								style="padding: 2px 30px; font-size: 13px;">åŸºæœ¬è³‡æ–™</a>
							<div class="dropdown-divider"
								style="border-color: rgb(255, 255, 255);"></div>
						</div></li>
					<li class="nav-item dropdown show"><a
						class="dropdown-toggle nav-link" aria-expanded="true"
						data-bs-toggle="dropdown" data-bs-auto-close="false" href="#"
						style="color: #a67c52; padding: 5px 16px; font-weight: bold; font-size: 14px;">æˆ¿é–“ç®¡ç†</a>
						<div class="dropdown-menu show" data-bs-popper="none"
							style="background: rgba(255, 255, 255, 0); border-style: none; padding: 0px; margin: 0px; margin-bottom: 5px;">
							<a class="dropdown-item" href="#"
								style="padding: 2px 30px; font-size: 13px;">ç¸½è¦½</a><a
								class="dropdown-item" href="#"
								style="padding: 2px 30px; font-size: 13px;">å·²ä¸Šæ¶</a><a
								class="dropdown-item" href="#"
								style="padding: 2px 30px; font-size: 13px;">æœªä¸Šæ¶</a>
							<div class="dropdown-divider"
								style="border-color: rgb(255, 255, 255);"></div>
						</div></li>
					<li class="nav-item dropdown show"><a
						class="dropdown-toggle nav-link" aria-expanded="true"
						data-bs-toggle="dropdown" data-bs-auto-close="false" href="#"
						style="color: #a67c52; padding: 5px 16px; font-weight: bold; font-size: 14px;">è¨‚å–®ç®¡ç†</a>
						<div class="dropdown-menu show" data-bs-popper="none"
							style="background: rgba(255, 255, 255, 0); border-style: none; padding: 0px; margin: 0px; margin-bottom: 5px;">
							<a class="dropdown-item" href="#"
								style="padding: 2px 30px; font-size: 13px;">æ–°å¢å•†å“</a><a
								class="dropdown-item" href="#"
								style="padding: 2px 30px; font-size: 13px;">å•†å“åˆ—è¡¨</a><a
								class="dropdown-item" href="#"
								style="padding: 2px 30px; font-size: 13px;">æ–°å¢ä¿ƒéŠ·å°ˆæ¡ˆ</a><a
								class="dropdown-item" href="#"
								style="padding: 2px 30px; font-size: 13px;">ä¿ƒéŠ·å°ˆæ¡ˆåˆ—è¡¨</a><a
								class="dropdown-item" href="#"
								style="padding: 2px 30px; font-size: 13px;">è¨‚å–®åˆ—è¡¨</a>
							<div class="dropdown-divider"
								style="border-color: rgb(255, 255, 255);"></div>
						</div></li>
					<li class="nav-item dropdown show"><a
						class="dropdown-toggle nav-link" aria-expanded="true"
						data-bs-toggle="dropdown" data-bs-auto-close="false" href="#"
						style="color: #a67c52; padding: 5px 16px; font-weight: bold; font-size: 14px;">å³æ™‚èŠå¤©ç®¡ç†</a>
						<div class="dropdown-menu show" data-bs-popper="none"
							style="background: rgba(255, 255, 255, 0); border-style: none; padding: 0px; margin: 0px; margin-bottom: 5px;">
							<a class="dropdown-item" href="#"
								style="padding: 2px 30px; font-size: 13px;">å®¢æœåˆ—è¡¨</a>
						</div></li>
				</ul>
				<div class="text-center d-none d-md-inline">
					<button class="btn rounded-circle border-0" id="sidebarToggle"
						type="button"></button>
				</div>
			</div>
		</nav>


		<div class="d-flex flex-column" id="content-wrapper">
			<div id="content">
				<nav
					class="navbar navbar-light navbar-expand bg-white shadow mb-4 topbar static-top">
					<div class="container-fluid">
						<button class="btn btn-link d-md-none rounded-circle me-3"
							id="sidebarToggleTop" type="button">
							<i class="fas fa-bars"></i>
						</button>
						<ul class="navbar-nav flex-nowrap ms-auto">
							<li class="nav-item dropdown no-arrow">
								<div class="nav-item dropdown no-arrow">
									<a class="dropdown-toggle nav-link" aria-expanded="false"
										data-bs-toggle="dropdown" href="#"><span
										class="d-none d-lg-inline me-2 text-gray-600 small">Valerie
											Luna</span><img class="border rounded-circle img-profile"
										src="./img/avatars/avatar1.jpeg"></a>
									<div
										class="dropdown-menu shadow dropdown-menu-end animated--grow-in"
										style="min-width: 110px;">
										<a class="dropdown-item" href="#"><i
											class="fas fa-sign-out-alt fa-sm fa-fw me-2 text-gray-400"></i>&nbsp;Logout</a>
									</div>
								</div>
							</li>
						</ul>
					</div>
				</nav>

				<div class="container">

					<form class="well form-horizontal" action=" " method="post"
						id="contact_form">
						<fieldset>

							<!-- Form Name -->
							<legend>åŸºæœ¬è³‡æ–™ç®¡ç†</legend>

							<!-- Text input-->
							<div class="form-group">
								<label class="col-md-1 control-label">å§“å</label>
								<div class="col-md-4 inputGroupContainer">
									<div class="input-group">
										<input name="owner_name" id="owner_name" class="form-control"
											type="text" maxlength="50">
									</div>
								</div>
							</div>

							<!-- Text input-->
							<div class="form-group">
								<label class="col-md-1 control-label">èº«åˆ†è­‰</label>
								<div class="col-md-4 inputGroupContainer">
									<div class="input-group">
										<input name="owner_id" id="owner_id" class="form-control"
											type="text" maxlength="10">
									</div>
								</div>
							</div>

							<!-- Text input-->
							<div class="form-group">
								<label class="col-md-1 control-label">é›»å­ä¿¡ç®±</label>
								<div class="col-md-4 inputGroupContainer">
									<div class="input-group">
										<input name="owner_email" id="owner_email"
											class="form-control" type="text" maxlength="50">
									</div>
								</div>
							</div>

							<!-- Text input-->
							<div class="form-group">
								<label class="col-md-1 control-label">å¯†ç¢¼</label>
								<div class="col-md-4 inputGroupContainer">
									<div class="input-group">

										<p class="change_password">è®Šæ›´å¯†ç¢¼?</p>
									</div>
								</div>
							</div>


							<!-- Text input-->
							<div class="form-group">
								<label class="col-md-1 control-label">é›»è©±</label>
								<div class="col-md-4 inputGroupContainer">
									<div class="input-group">
										<input name="owner_phone" id="owner_phone"
											class="form-control" type="text" maxlength="10">
									</div>
								</div>
							</div>

							<!-- Text input-->
							<div class="form-group">
								<label class="col-md-1 control-label">éŠ€è¡Œå¸³è™Ÿ</label>
								<div class="col-md-4 inputGroupContainer">
									<div class="input-group">
										<input name="owner_bank" id="owner_bank" class="form-control"
											type="text" maxlength="14">
									</div>
								</div>
							</div>

							<!-- Text input-->
							<div class="form-group">
								<label class="col-md-1 control-label">æ—…é¤¨åç¨±</label>
								<div class="col-md-4 inputGroupContainer">
									<div class="input-group">
										<input name="hotel_name" id="hotel_name" class="form-control"
											type="text" maxlength="20">
									</div>
								</div>
							</div>

							<!-- Text input-->
							<div class="form-group">
								<label class="col-md-1 control-label">æ—…é¤¨åœ°å€</label>
								<div class="col-md-4 inputGroupContainer">
									<div class="input-group">
										<input name="hotel_address" id="hotel_address"
											class="form-control" type="text" maxlength="100">
									</div>
								</div>
							</div>

							<!-- Text input-->
							<!-- <div class="form-group">
                                <label class="col-md-1 control-label">å¸³è™Ÿ</label>
                                <div class="col-md-4 inputGroupContainer">
                                    <div class="input-group">
                                        <input name="owner_account" id="owner_account" class="form-control" type="text" maxlength="8">
                                    </div>
                                </div>
                            </div> -->

							<!-- Text input-->
							<!--                             <div class="form-group"> -->
							<!--                                 <label class="col-md-1 control-label">è¨±å¯è­‰è™Ÿ</label> -->
							<!--                                 <div class="col-md-4 inputGroupContainer"> -->
							<!--                                     <div class="input-group"> -->
							<!--                                         <input name="hotel_lic_id" id="hotel_lic_id" class="form-control" type="text" maxlength="50" readonly> -->
							<!--                                     </div> -->
							<!--                                 </div> -->
							<!--                             </div> -->
							<div class="hotel_lic_pic">
								<label class="col-md-1 control-label">è¨±å¯è­‰</label>
								<button class="hotel_lic_pic">ğŸ“‘</button>
							</div>
							<div>
								<span>è­‰è™Ÿ:</span> <span id="hotel_lic"></span>
						</fieldset>
						<div class>
							<button class="update_btn">ç·¨è¼¯</button>
							<button class="save_btn">ä¿å­˜</button>
						</div>
					</form>
				</div>
			</div>
			<!-- /.container -->

			<footer class="bg-white sticky-footer">
				<div class="container my-auto">
					<div class="text-center my-auto copyright">
						<span>Copyright Â© Brand 2023</span>
					</div>
				</div>
			</footer>
		</div>
		<a class="border rounded d-inline scroll-to-top" href="#page-top"><i
			class="fas fa-angle-up"></i></a>
	</div>

</body>

<script src="Jquery/jquery3.6.4.min.js"></script>
<script src="./js/theme.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-validator/0.4.5/js/bootstrapvalidator.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    $(function () {
    
   
    //æŸ¥è©¢ä½¿ç”¨è€…è³‡æ–™
    	$.ajax({
    		  url: "/ownerAccount/1",
    		  type: 'GET',
    		  contentType: "application/json",
    		  success: function(res) {
    		    console.log(res);
    		    
    		    $("#owner_name").val(res.ownerName);
    		    $("#owner_id").val(res.ownerId);
    		    $("#owner_email").val(res.ownerEmail);
    		    $("#owner_password").val(res.ownerPassword);
    		    $("#owner_phone").val(res.ownerPhone);
    		    $("#owner_bank").val(res.ownerBank);
    		    $("#hotel_name").val(res.hotelName);
    		    $("#hotel_address").val(res.hotelAddress);
    		    $("#hotel_address").val(res.hotelAddress);
//     		    $('#hotel_lic_id').val(res.hotelLicId);
    		    var hotelLicId = res.hotelLicId;
    		    console.log(hotelLicId);
    		    $('#hotel_lic').text($('#hotel_lic').text()+hotelLicId);
    		    
    		    const hotelLicPic = res.hotelLicPic;

    		    $('.hotel_lic_pic').on("click",function(){
    		    	Swal.fire({
    		    		title:"è¨±å¯è­‰",
    		    		width:"600px",
    		    		html:`<img src="data:image/octet-stream;base64,${hotelLicPic}" style="width:500px">`
    		    	});
    		    });
    		    
    		  },
    		  error: function(xhr, status, error) {
    		   
    		  }
    		});
    	

    
    
        // è®“è¼¸å…¥æ¡†è®Šç‚ºä¸å¯ä¿®æ”¹
        $('.form-control').prop('disabled', true);
        
        
        
        function updateOwnerAccount(data) {
            $.ajax({
                url: "/ownerAccount/1",
                type: 'POST',
                contentType: "application/json",
                data: JSON.stringify(data),
                success: function (res) {
                    console.log("æ›´æ–°æˆåŠŸ");
                },
                error: function (err) {
                    console.log("æ›´æ–°å¤±æ•—");
                }
            });
        }
        
        
        
        

        // ç·¨è¼¯
        $(".update_btn").on("click",function(){
            $('.form-control').prop('disabled',false);
        });

        $(".save_btn").on("click",function(){
            $('.form-control').prop('disabled',true);
            var newOwnerName = $("#owner_name").val();
           	var newOwnerEmail = $("#owner_email").val();
           	var newOwnerPhone = $("#owner_phone").val();
           	var newOwnerBank = $("#owner_bank").val();
            var newHotelName = $("#hotel_name").val();
            var newHotelAddress = $("#hotel_address").val();
           	
            
            
            var data = {
                    ownerName: newOwnerName,
                    ownerEmail: newOwnerEmail,
                    ownerPhone: newOwnerPhone,
                    ownerBank: newOwnerBank,
                    hotelName: newHotelName,
                    hotelAddress: newHotelAddress,
                    hotelLicId: $("#hotel_lic").text(),
                    ownerPassword: $("#owner_password").val(),
                    
                };
            
            updateOwnerAccount(data);
//                 $.ajax({
//                     url: "/ownerAccount/1",
//                     type: 'POST',
//                     contentType: "application/json",
//                     data: JSON.stringify(data),
//                     success: function(res) {
//                         console.log("æ›´æ–°æˆåŠŸ");
                        
//                     },
//                     error: function(err) {
//                         console.log("æ›´æ–°å¤±æ•—");
                        
//                     }
//                 });
            });
            
            
       
    
        $('#contact_form').bootstrapValidator({


            fields: {
                owner_name: {
                    validators: {
                        stringLength: {
                            min: 2,
                            message: 'è«‹å¡«å…¥å§“æ°èˆ‡å§“åè‡³å°‘äºŒå­—å…ƒ'
                        },
                        notEmpty: {
                            message: 'è«‹å¡«å…¥åå­—'
                        },
                        regexp: {
                            regexp: /^[\u4E00-\u9FFFã„…-ã„©ã„š-ã„¦A-Za-z\s]+$/,
                            message: 'æ­¤æ¬„ä½ä¸å¾—æœ‰ç¬¦è™ŸåŠæ•¸å­—æˆ–ä½¿ç”¨ç©ºæ ¼å€éš”'
                        },
                    }
                },

                owner_id: {
                    validators: {
                        notEmpty: {
                            message: 'è«‹å¡«å…¥èº«åˆ†è­‰å­—è™Ÿ'
                        },
                        stringLength: {
                            min: 10,
                            message: 'é•·åº¦ä¸ç¬¦'
                        },
                        regexp: {
                            regexp: /^[A-Z]{1}[1-2]{1}\d{8}$/,
                            message: 'èº«åˆ†è­‰æ ¼å¼ä¸æ­£ç¢º'
                        }
                    }
                },
                owner_email: {
                    validators: {
                        notEmpty: {
                            message: 'è«‹å¡«å…¥ä¿¡ç®±'
                        },
                        emailAddress: {
                            message: 'è«‹è¼¸å…¥æœ‰æ•ˆçš„ä¿¡ç®±'
                        }
                    }
                },
                owner_phone: {
                    validators: {
                        notEmpty: {
                            message: 'è«‹å¡«å…¥é€£çµ¡é›»è©±'
                        },
                        regexp: {
                            regexp: /^\d+$/,
                            message: ' '
                        },
                    }
                },
                owner_bank: {
                    validators: {
                        stringLength: {
                            min: 8,
                            message: ' '
                        },
                        notEmpty: {
                            message: 'æ­¤æ¬„ä½ä¸å¾—ç©ºç™½'
                        },
                        regexp: {
                            regexp: /^\d+$/,
                            message: 'éŠ€è¡Œå¸³è™Ÿæ ¼å¼ç•°å¸¸'
                        }
                    }
                },
                hotel_name: {
                    validators: {
                        stringLength: {
                            min: 1,
                            message: ' '
                        },
                        notEmpty: {
                            message: 'æ­¤æ¬„ä½ä¸å¾—ç©ºç™½'
                        }
                    }
                },
                hotel_address: {
                    validators: {
                        stringLength: {
                            min: 1,
                            message: ' '
                        },
                        notEmpty: {
                            message: 'æ­¤æ¬„ä½ä¸å¾—ç©ºç™½'
                        },
                        regexp: {
                            regexp: /^[\u4E00-\u9FFF0-9\u3105-\u3129\-]+$/,
                            message: 'åœ°å€æ ¼å¼ä¸æ­£ç¢ºï¼Œåƒ…èƒ½åŒ…å«ä¸­æ–‡ã€æ•¸å­—å’Œï¼ˆ-ï¼‰ç¬¦è™Ÿ'
                        }
                    }
                },

                hotel_lic_id: {
                    validators: {
                        notEmpty: {
                            message: 'æ­¤æ¬„ä½ä¸å¾—ç©ºç™½'
                        },
                        regexp: {
                            regexp: /^[a-zA-Z0-9 -]+$/,
                            message: 'è«‹ç¢ºèªè¼¸å…¥è­‰è™Ÿ'
                        },
                        stringLength: {
                            min: 3,
                            message: "é•·åº¦ä¸ç¬¦"
                        }
                    }
                },
            }
        });


        $(".change_password").on("click", function () {
            Swal.fire({
                title: "è®Šæ›´å¯†ç¢¼",
                showCancelButton: true,
                confirmButtonText: 'ç¢ºå®š',
                cancelButtonText: 'å–æ¶ˆ',
                html: `
                <div style="position: relative;"> 
                    <label style="width: 70px">æ–°å¯†ç¢¼</label>    
                         <input id ="new_password" name="new_password"  type="password" maxlength="20" style="width: 200px">
                         <i class="toggle-password-icon fas fa-eye" style="position: absolute; right: 50px; cursor:pointer"></i>
                            
                </div>
                <br>
                <div>
                    <label style="width: 70px">ç¢ºèªå¯†ç¢¼</label>    
                         <input  id ="re_password" name="re_password"  type="password" maxlength="20" style="width: 200px">           
                </div>`

            }).then((result)=>{
                if(result.isConfirmed){
                	var newPassword = $("#new_password").val();
                	var passwordRegexp = /^[a-zA-Z0-9]{8,20}$/;
                	var rePassword = $("#re_password").val();
                	
                	if(passwordRegexp.test(newPassword)){
                		if(newPassword === rePassword){
                    		console.log("ä¸€æ¨£");
                        	Swal.fire({
                            	title:"å¯†ç¢¼è®Šæ›´æˆåŠŸ",
                            	text:"è«‹ç‰¢è¨˜æ‚¨çš„æ–°å¯†ç¢¼"
                        	})
                        	 var newOwnerName = $("#owner_name").val();
           	var newOwnerEmail = $("#owner_email").val();
           	var newOwnerPhone = $("#owner_phone").val();
           	var newOwnerBank = $("#owner_bank").val();
            var newHotelName = $("#hotel_name").val();
            var newHotelAddress = $("#hotel_address").val();
                        	var data ={
                        			ownerName: newOwnerName,
                                    ownerEmail: newOwnerEmail,
                                    ownerPhone: newOwnerPhone,
                                    ownerBank: newOwnerBank,
                                    hotelName: newHotelName,
                                    hotelAddress: newHotelAddress,
                                    hotelLicId: $("#hotel_lic").text(),
                			ownerPassword:newPassword
                			};
                        	updateOwnerAccount(data);
                        	
                    	}else{
                    		Swal.fire({
                    			icon:'error',
                            	title:"å¯†ç¢¼è®Šæ›´å¤±æ•—",
                            	text:"å…©æ¬¡è¼¸å…¥çš„å¯†ç¢¼ä¸ä¸€è‡´"
                        	})
                    	}
                		
                	}else{
                		Swal.fire({
                			icon:'error',
                        	title:"å¯†ç¢¼ä¸ç¬¦æ ¼å¼",
                        	text:"å¯†ç¢¼é•·åº¦è«‹ä»‹æ–¼8~20å­—ç¬¦,åƒ…èƒ½å¤§å°å¯«å­—æ¯åŠæ•¸å­—"
                    	})
                	}
                	
                	
                	
                           	
                }
            });
            
        });
        
        
        
        
        
        
        $(document).on("click",".toggle-password-icon",function(){
            var passwordInput = $(this).closest("div").find("input");

            if(passwordInput.attr("type") === "password"){
                passwordInput.attr("type","text");
            }else{
                passwordInput.attr("type","password");
            }
        });

        

    });







</script>

</html>